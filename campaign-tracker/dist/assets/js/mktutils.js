function saveMarketingInformation(){function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(window.location.href);return null==results?"":decodeURIComponent(results[1].replace(/\+/g," "))}function getCookieOptions(){var hostname=window.location.hostname.replace(/(www.|landing.|app.)/g,""),clioDomains=["goclio.co.uk","goclio.eu","goclio.com"];return-1!==clioDomains.indexOf(hostname)&&(hostname="."+hostname),{domain:hostname,expires:90,path:"/"}}function captureParameters(cookieOptions){var fields=["gclid","member_id","promotional_code","referral_code","bar_landing_url","utm_campaign","utm_content","utm_medium","utm_source","utm_term"];fields.forEach(function(field){var value=getParameterByName(field);value&&jQuery.cookie("mkt_"+field,value,cookieOptions)})}function captureReferrer(cookieOptions){var referrer=document.referrer;!referrer||referrer.match(/^https?:\/\/[^\/]*goclio\.com\//)||referrer.match(/^https?:\/\/[^\/]*clio\.com\//)||referrer.match(/^https?:\/\/[^\/]*clio\.co.uk\//)||referrer.match(/^https?:\/\/[^\/]*clio\.eu\//)||null!=jQuery.cookie("mkt_referrer")||jQuery.cookie("mkt_referrer",referrer,cookieOptions)}function captureLandingPage(cookieOptions){null==jQuery.cookie("mkt_landing_url")&&jQuery.cookie("mkt_landing_url",document.location,cookieOptions)}function captureOptimizely(cookieOptions){if(window.optimizely&&window.optimizely.data){var allExperiments=window.optimizely.data.experiments,experimentVariationNames=Object.keys(allExperiments).map(function(experimentId){var variationName=window.optimizely.data.state.variationNamesMap[experimentId],experimentName=window.optimizely.data.experiments[experimentId].name;return experimentName+" : "+variationName}).join(" | ");0!==experimentVariationNames.length&&jQuery.cookie("mkt_optimizely_data",experimentVariationNames,cookieOptions)}}var cookieOptions=getCookieOptions();captureParameters(cookieOptions),captureReferrer(cookieOptions),captureLandingPage(cookieOptions),captureOptimizely(cookieOptions)}function loadMarketingInformation(){for(var fields=["gclid","landing_url","member_id","referrer","bar_landing_url","utm_campaign","utm_content","utm_medium","utm_source","utm_term","optimizely_data"],i=0;i<fields.length;i++){var theField=fields[i].substring(0,255),value=jQuery.cookie("mkt_"+theField);if(value){var source,theValue=decodeURIComponent(value).substring(0,512),inputElem=jQuery("<input>").attr("type","hidden").attr("name","marketing_tracker["+theField+"]").val(theValue);switch(theField){case"optimizely_data":source="Optimizely";break;case"utm_campaign":case"utm_content":case"utm_medium":case"utm_source":case"utm_term":source="Google";break;default:source="Clio Marketing Tracker"}var theSource=source.substring(0,255),marketingTrackerFieldKey=jQuery("<input>").attr("type","hidden").attr("name","marketing_tracker_values["+i+"][key]").val(theField),marketingTrackerFieldValue=jQuery("<input>").attr("type","hidden").attr("name","marketing_tracker_values["+i+"][value]").val(theValue),marketingTrackerFieldSource=jQuery("<input>").attr("type","hidden").attr("name","marketing_tracker_values["+i+"][source]").val(theSource);jQuery("form").append(inputElem,marketingTrackerFieldKey,marketingTrackerFieldValue,marketingTrackerFieldSource)}}var promotionalCode=jQuery.cookie("mkt_promotional_code");promotionalCode&&jQuery("#marketing_tracker_promotional_code").val(promotionalCode);var referralCode=jQuery.cookie("mkt_referral_code");referralCode&&jQuery("#marketing_tracker_referral_code").val(referralCode.replace(/%20/g,""))}jQuery.cookie=function(name,value,options){if("undefined"==typeof value){var cookieValue=null;if(document.cookie&&""!=document.cookie)for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}return cookieValue}options=options||{},null===value&&(value="",options.expires=-1);var expires="";if(options.expires&&("number"==typeof options.expires||options.expires.toUTCString)){var date;"number"==typeof options.expires?(date=new Date,date.setTime(date.getTime()+24*options.expires*60*60*1e3)):date=options.expires,expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"",domain=options.domain?"; domain="+options.domain:"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")},jQuery(document).ready(function(){saveMarketingInformation(),jQuery("form").length&&loadMarketingInformation()});